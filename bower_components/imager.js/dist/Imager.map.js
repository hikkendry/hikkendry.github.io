{"version":3,"file":"./Imager.min.js","sources":["./Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnFn","value","noop","trueFn","Imager","elements","opts","self","this","doc","undefined","selector","viewportHeight","documentElement","clientHeight","className","gif","createElement","src","alt","scrollDelay","onResize","hasOwnProperty","lazyload","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","getKeys","sort","a","b","divs","querySelectorAll","ready","onReady","changeDivsToEmptyImages","nextTick","init","addEvent","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","callback","setTimeout","addEventListener","el","eventName","fn","attachEvent","Object","keys","object","key","push","prototype","scrollCheck","offscreenImageCount","element","isPlaceholder","isThisElementOnScreen","clearInterval","interval","initialized","filterFn","registerScrollEvent","checkImagesNeedReplacing","registerResizeEvent","createGif","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","width","setAttribute","parentNode","replaceChild","offset","getPageOffset","elementOffsetTop","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","computedWidth","naturalWidth","getNaturalWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","getClosestValue","clientWidth","devicePixelRatio","getPixelRatio","selectedWidth","replace","transforms","pixelRatio","context","widths","interpolator","map","baseValue","candidates","parseFloat","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","Image","imageCopy","call","module","exports","define","amd"],"mappings":"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"}