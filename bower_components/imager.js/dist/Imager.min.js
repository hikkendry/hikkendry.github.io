!function(t,e){"use strict";function i(t,e){for(var i=0,s=t.length,a=[];s>i;i++)a[i]=e(t[i],i);return a}function s(t){return t}function a(){}function n(){return!0}function r(t,n){var h=this,u=e;n=n||{},void 0!==t&&("string"==typeof t?(n.selector=t,t=void 0):"undefined"==typeof t.length&&(n=t,t=void 0)),this.viewportHeight=u.documentElement.clientHeight,this.selector=n.selector||".delayed-image-load",this.className=n.className||"image-replace",this.gif=u.createElement("img"),this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",this.gif.className=this.className,this.gif.alt="",this.scrollDelay=n.scrollDelay||250,this.onResize=n.hasOwnProperty("onResize")?n.onResize:!0,this.lazyload=n.hasOwnProperty("lazyload")?n.lazyload:!1,this.scrolled=!1,this.availablePixelRatios=n.availablePixelRatios||[1,2],this.availableWidths=n.availableWidths||o,this.onImagesReplaced=n.onImagesReplaced||a,this.widthsMap={},this.refreshPixelRatio(),this.widthInterpolator=n.widthInterpolator||s,this.gif.removeAttribute("height"),this.gif.removeAttribute("width"),"function"!=typeof this.availableWidths&&("number"==typeof this.availableWidths.length?this.widthsMap=r.createWidthsMap(this.availableWidths,this.widthInterpolator):(this.widthsMap=this.availableWidths,this.availableWidths=l(this.availableWidths)),this.availableWidths=this.availableWidths.sort(function(t,e){return t-e})),t?(this.divs=i(t,s),this.selector=null):this.divs=i(u.querySelectorAll(this.selector),s),this.ready(n.onReady),this.changeDivsToEmptyImages(this.divs),c(function(){h.init()})}var o,l,h,c=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)};h=function(){return e.addEventListener?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)}}(),o=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736],l="function"==typeof Object.keys?Object.keys:function(t){var e,i=[];for(e in t)i.push(e);return i},r.prototype.scrollCheck=function(){var e=this,s=0,a=[];this.scrolled&&(i(this.divs,function(t){e.isPlaceholder(t)&&(++s,e.isThisElementOnScreen(t)&&a.push(t))}),0===s&&t.clearInterval(e.interval),this.changeDivsToEmptyImages(a),this.scrolled=!1)},r.prototype.init=function(){var t=this;this.initialized=!0;var e=n;this.lazyload?(this.registerScrollEvent(),e=function(e){return t.isPlaceholder(e)===!1}):this.checkImagesNeedReplacing(this.divs),this.onResize&&this.registerResizeEvent(e),this.onReady()},r.prototype.ready=function(t){this.onReady=t||a},r.prototype.createGif=function(t){if(t.className.match(new RegExp("(^| )"+this.className+"( |$)")))return t;var e=t.getAttribute("data-class"),i=t.getAttribute("data-width"),s=this.gif.cloneNode(!1);return i&&(s.width=i,s.setAttribute("data-width",i)),s.className=(e?e+" ":"")+this.className,s.setAttribute("data-src",t.getAttribute("data-src")),s.setAttribute("alt",t.getAttribute("data-alt")||this.gif.alt),t.parentNode.replaceChild(s,t),s},r.prototype.changeDivsToEmptyImages=function(t){var e=this;i(t,function(i,s){t[s]=e.createGif(i)}),this.initialized&&this.checkImagesNeedReplacing(t)},r.prototype.isPlaceholder=function(t){return t.src===this.gif.src},r.prototype.isThisElementOnScreen=function(t){var e=r.getPageOffset(),i=0;if(t.offsetParent)do i+=t.offsetTop;while(t=t.offsetParent);return i<this.viewportHeight+e},r.prototype.checkImagesNeedReplacing=function(t,e){var s=this;e=e||n,this.isResizing||(this.isResizing=!0,this.refreshPixelRatio(),i(t,function(t){e(t)&&s.replaceImagesBasedOnScreenDimensions(t)}),this.isResizing=!1,this.onImagesReplaced(t))},r.prototype.replaceImagesBasedOnScreenDimensions=function(t){var e,i;i=r.getNaturalWidth(t),e="function"==typeof this.availableWidths?this.availableWidths(t):this.determineAppropriateResolution(t),t.width=e,!this.isPlaceholder(t)&&i>=e||(t.src=this.changeImageSrcToUseNewImageDimensions(t.getAttribute("data-src"),e),t.removeAttribute("width"),t.removeAttribute("height"))},r.prototype.determineAppropriateResolution=function(t){return r.getClosestValue(t.getAttribute("data-width")||t.parentNode.clientWidth,this.availableWidths)},r.prototype.refreshPixelRatio=function(){this.devicePixelRatio=r.getClosestValue(r.getPixelRatio(),this.availablePixelRatios)},r.prototype.changeImageSrcToUseNewImageDimensions=function(t,e){return t.replace(/{width}/g,r.transforms.width(e,this.widthsMap)).replace(/{pixel_ratio}/g,r.transforms.pixelRatio(this.devicePixelRatio))},r.getPixelRatio=function(e){return(e||t).devicePixelRatio||1},r.createWidthsMap=function(t,e){for(var i={},s=t.length;s--;)i[t[s]]=e(t[s]);return i},r.transforms={pixelRatio:function(t){return 1===t?"":"-"+t+"x"},width:function(t,e){return e[t]||t}},r.getClosestValue=function(t,e){var i=e.length,s=e[i-1];for(t=parseFloat(t);i--;)t<=e[i]&&(s=e[i]);return s},r.prototype.registerResizeEvent=function(e){var i=this;h(t,"resize",function(){i.checkImagesNeedReplacing(i.divs,e)})},r.prototype.registerScrollEvent=function(){var i=this;this.scrolled=!1,this.interval=t.setInterval(function(){i.scrollCheck()},i.scrollDelay),h(t,"scroll",function(){i.scrolled=!0}),h(t,"resize",function(){i.viewportHeight=e.documentElement.clientHeight,i.scrolled=!0})},r.getPageOffsetGenerator=function(i){return i?function(){return t.pageYOffset}:function(){return e.documentElement.scrollTop}},r.getNaturalWidth=function(){return"naturalWidth"in new Image?function(t){return t.naturalWidth}:function(t){var i=e.createElement("img");return i.src=t.src,i.width}}(),r.getPageOffset=r.getPageOffsetGenerator(Object.prototype.hasOwnProperty.call(t,"pageYOffset")),r.applyEach=i,"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=r:"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof t&&(t.Imager=r)}(window,document);
//# sourceMappingURL=./Imager.map.js